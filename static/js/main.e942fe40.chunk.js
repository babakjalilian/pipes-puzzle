(this["webpackJsonppipes-puzzle"]=this["webpackJsonppipes-puzzle"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(17),s=n(7),o=(n(40),n(15)),i={defaultWebSocketUrl:"wss://hometask.eg1236.com/game-pipes/",requestHelp:"help",requestNew:"new",requestMap:"map",requestRotate:"rotate",requestVerify:"verify",responseNewSuccess:"new: OK",responseRotateSuccess:"rotate: OK",responseMapSuccess:"map:",responseVerifyIsCorrect:"verify: Correct!",responsePassword:"Password:",responseGameOver:"verify: Only 10",remainingVerifyAttemptCount:12,maxLevel:6},l="puzzle-password-level_",u={levelPassword1:"puzzle-password-level_1",levelPassword2:"puzzle-password-level_2",levelPassword3:"puzzle-password-level_3",levelPassword4:"puzzle-password-level_4",levelPassword5:"puzzle-password-level_5",levelPassword6:"puzzle-password-level_6"},p={title:"Pipes Puzzle"},d={levelPrefix:"Level",check:"Check",giveUp:"Give Up!",return:"Return",nextLevel:"Next Level",loading:"Please wait...",connectionError:"Something went wrong. Please try again.",remainingVerifyAttemptText:"You don't have unlimited check opportunities, only",achievemessage:"Well done! You now have the password for this level:",gameOverMessage:"Game over! Try again.",gameFinishedMessage:"We never thought anyone would see this! You made the impossible possible! ",welcomeTitle:"Welcome!",welcomeDescription:"The goal of the puzzle is to rotate the tiles on the map to make all pipes connected in a single group, with no loops and no dangling pipes. Click a tile with the mouse to rotate it.\n Choose a level to start.",copyright:"All rights reservedd."},b={level_1:"(8x8) A Cute Welcome",level_2:"(20x25) Warming You Up",level_3:"(50x50) Let's Do This!",level_4:"(100x200) Getting Serious!",level_5:"(300x400) Standing Ovation for the Pro!",level_6:"(1000x1000) Take This Monster Down, Champ."},v=n(11),j=n(16),z=n(26),h=n(27),O=function(e){var t;return null===(t=e.replace("map:",""))||void 0===t?void 0:t.trim().split("\n").map((function(e){return null===e||void 0===e?void 0:e.trim().split("")}))},f=function(e){return window.localStorage.getItem(e)||null},m=Object(z.a)((function e(t){var n=this;return Object(h.a)(this,e),this._webSocketUrl=i.defaultWebSocketUrl,this.onOpenConnectionAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.onopen=function(){e(!0)},t.onerror=function(){e(!1)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onRecieveMessageAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.onmessage=function(t){var n=t.data||"";e(n)},t.onerror=function(){e(null)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onCloseConnectionAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.onclose=function(){e(t.readyState)},t.onerror=function(){e(null)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createNewPuzzle=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){var c,r,a,s,o;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new WebSocket(n._webSocketUrl),e.next=4,n.onOpenConnectionAsync(c);case 4:if(e.sent){e.next=7;break}throw new Error;case 7:return c.send("".concat(i.requestNew," ").concat(t)),e.next=10,n.onRecieveMessageAsync(c);case 10:if(null!==(r=e.sent)&&void 0!==r&&r.startsWith(i.responseNewSuccess)){e.next=13;break}throw new Error;case 13:return c.send(i.requestMap),e.next=16,n.onRecieveMessageAsync(c);case 16:if(null!==(a=e.sent)&&void 0!==a&&a.startsWith(i.responseMapSuccess)){e.next=19;break}throw new Error;case 19:return s=O(a),o=[s.length,s[0].length],e.abrupt("return",{puzzleData:s,puzzleDataDimension:o,webSocket:c});case 24:return e.prev=24,e.t0=e.catch(0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),this.rotatePuzzleCellAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){var c,r,a,s,o,l,u,p;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.webSocket,r=t.cellX,a=t.cellY,e.prev=1,c.send("".concat(i.requestRotate," ").concat(r," ").concat(a)),e.next=5,n.onRecieveMessageAsync(c);case 5:s=e.sent;case 6:if(null!==(o=s)&&void 0!==o&&o.startsWith(i.responseRotateSuccess)){e.next=12;break}return e.next=9,n.onRecieveMessageAsync(c);case 9:s=e.sent,e.next=6;break;case 12:return c.send(i.requestMap),e.next=15,n.onRecieveMessageAsync(c);case 15:l=e.sent;case 16:if(null!==(u=l)&&void 0!==u&&u.startsWith(i.responseMapSuccess)){e.next=22;break}return e.next=19,n.onRecieveMessageAsync(c);case 19:l=e.sent,e.next=16;break;case 22:return p=O(l),e.abrupt("return",p);case 26:return e.prev=26,e.t0=e.catch(1),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),this.verifyPuzzleAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t,c){var r,a,s,o;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.send(i.requestVerify),e.next=4,n.onRecieveMessageAsync(t);case 4:if(r=e.sent){e.next=7;break}throw new Error;case 7:return a={isCorrect:!1,isGameOver:!1,levelPassword:""},null!==r&&void 0!==r&&r.startsWith(i.responseGameOver)&&(a={isCorrect:!1,isGameOver:!0,levelPassword:""}),null!==r&&void 0!==r&&r.startsWith(i.responseVerifyIsCorrect)&&(o=(null===(s=r.split(i.responsePassword).pop())||void 0===s?void 0:s.trim())||"",u="".concat(l).concat(c),p=o,window.localStorage.setItem(u,p),a={isCorrect:!0,isGameOver:!1,levelPassword:o}),e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",null);case 16:case"end":return e.stop()}var u,p}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),this.goToNextLevelAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t,c){var r,a,s,o,l;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=c>i.maxLevel?i.maxLevel:c,t.send("".concat(i.requestNew," ").concat(r)),e.next=5,n.onRecieveMessageAsync(t);case 5:if(null!==(a=e.sent)&&void 0!==a&&a.startsWith(i.responseNewSuccess)){e.next=8;break}throw new Error;case 8:return t.send(i.requestMap),e.next=11,n.onRecieveMessageAsync(t);case 11:if(null!==(s=e.sent)&&void 0!==s&&s.startsWith(i.responseMapSuccess)){e.next=14;break}throw new Error;case 14:return o=O(s),l=[o.length,o[0].length],e.abrupt("return",{puzzleData:o,puzzleDataDimension:l});case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),this.closeWebSocketAsync=function(){var e=Object(j.a)(Object(v.a)().mark((function e(t){var c;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.close(),e.next=4,n.onCloseConnectionAsync(t);case 4:if(null===(c=e.sent)){e.next=9;break}return e.abrupt("return",c);case 9:throw new Error;case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),this._webSocketUrl=t||this._webSocketUrl,e.instance||(e.instance=this),e.instance}));m.instance=void 0;var x="PUZZLE_STARTED",w="PUZZLE_RETURNED",g="PUZZLE_LOADING",N="PUZZLE_FAILED",y="PUZZLE_CREATED",k="PUZZLE_UPDATED",E="PUZZLE_GAMEOVER",L="PUZZLE_VALIDATIONATTEMPTDECREASED",C="PUZZLE_NEXTLEVELAVAILABLE",D="PUZZLE_NEXTLEVELCREATED",S=Object(o.b)(x),A=Object(o.b)(w),P=Object(o.b)(g),R=Object(o.b)(N),I=Object(o.b)(y,(function(e,t,n){return{payload:{data:e,puzzleDataDimension:t,webSocket:n}}})),V=Object(o.b)(k),_=Object(o.b)(E),T=Object(o.b)(L),W=Object(o.b)(C),M=Object(o.b)(D,(function(e,t){return{payload:{puzzleData:e,puzzleDataDimension:t}}})),U=function(e){return function(){var t=Object(j.a)(Object(v.a)().mark((function t(n){return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=12;break}return t.next=4,(new m).closeWebSocketAsync(e);case 4:if(null===t.sent){t.next=9;break}n(A()),t.next=10;break;case 9:throw new Error;case 10:t.next=13;break;case 12:n(A());case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n(R());case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},Z={puzzleIsWelcome:!0,puzzleLevel:1,puzzleLevelPassword:"",puzzleIsStarted:!1,puzzleIsOver:!1,puzzleIsLoading:!1,puzzleIsError:!1,puzzleData:[],puzzleDataDimension:[0,0],puzzleWebSocket:void 0,puzzleRemainingValidationAttempt:i.remainingVerifyAttemptCount,puzzleIsNextLevelAvailable:!1},H={puzzleReducer:Object(o.c)(Z,(function(e){e.addCase(S,(function(e,t){e.puzzleIsWelcome=!1,e.puzzleLevel=t.payload||Z.puzzleLevel})).addCase(A,(function(){return Z})).addCase(P,(function(e){e.puzzleIsLoading=!0,e.puzzleIsError=!1})).addCase(R,(function(e){e.puzzleIsLoading=!1,e.puzzleIsError=!0})).addCase(I,(function(e,t){e.puzzleIsStarted=!0,e.puzzleIsLoading=!1,e.puzzleIsError=!1,e.puzzleData=t.payload.data,e.puzzleDataDimension=t.payload.puzzleDataDimension,e.puzzleWebSocket=t.payload.webSocket})).addCase(V,(function(e,t){e.puzzleData=t.payload})).addCase(T,(function(e){e.puzzleRemainingValidationAttempt=e.puzzleRemainingValidationAttempt-1})).addCase(_,(function(e){e.puzzleIsOver=!0})).addCase(W,(function(e,t){e.puzzleIsNextLevelAvailable=!0,e.puzzleLevelPassword=t.payload||""})).addCase(M,(function(e,t){e.puzzleIsWelcome=!1,e.puzzleIsStarted=!0,e.puzzleIsLoading=!1,e.puzzleIsNextLevelAvailable=!1,e.puzzleLevel=e.puzzleLevel+1,e.puzzleData=t.payload.puzzleData,e.puzzleDataDimension=t.payload.puzzleDataDimension,e.puzzleRemainingValidationAttempt=Z.puzzleRemainingValidationAttempt}))}))},G=(n(41),n(42),n(4));var q=function(){return Object(G.jsx)("footer",{className:"footer",children:Object(G.jsx)("div",{className:"footer-container",children:Object(G.jsx)("div",{className:"copyright",children:Object(G.jsxs)("p",{className:"copyright-text",children:["\xa9 ",(new Date).getFullYear()," ",p.title,"."," ",d.copyright]})})})})};n(44);var Y=function(){return Object(G.jsx)("header",{className:"header",children:Object(G.jsx)("div",{className:"container",children:Object(G.jsxs)("div",{className:"logo",children:[Object(G.jsx)("svg",{className:"logo-image",width:"100",height:"100",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(G.jsx)("path",{fill:"#ff8600",d:"M212.125 20.156V59.72H39.53V188.56H69.846V293H39.623V483.03H204.687v-12.936H382v-45.5h95.281V264.53h-25.655V74.813H384.03V20.157H212.126zm18.688 18.688h134.53l-.03 35.968H297V153.938H378.28v46.625h18.69V135.25h-81.283V93.5h117.25v171.03H342V201.47H224.656v9.343l-.03 70.187v9.344h75.467v-18.688h-56.75v-51.5h79.97l-.002 126.78-185.937-.03V252.72h41.656v53.686h18.72V174.062h66.875v-18.687h-85.563v78.654h-60.375V293H88.53V188.562h57.44v-18.687H58.22v-91.47h153.905v30.94H111.437v18.686h119.375V38.845zM342 283.22h116.594v122.686H301.97v18.688h61.31v26.812H204.69v-48.812H110v18.687h76v43.064H58.312V311.72h60.376v53.874h9.343l114.782.03v65H261.5v-65H342v-31.529h66.75v33.844h18.688V315.406H342V283.22z"})}),Object(G.jsx)("h1",{className:"logo-text",children:p.title})]})})})};var X=function(e){var t=e.children;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Y,{}),Object(G.jsx)("main",{className:"layout",children:Object(G.jsx)("div",{className:"layout-container",children:Object(G.jsx)("div",{className:"layout-content",children:t})})}),Object(G.jsx)(q,{})]})},F=n(18),B=(n(45),n(28)),J=n(13),K=n(29);var Q=function(){var e=Object(s.b)();return Object(G.jsxs)("div",{className:"welcome",children:[Object(G.jsxs)("div",{className:"welcome-container",children:[Object(G.jsx)("h1",{className:"welcome-title",children:d.welcomeTitle}),Object(G.jsx)("p",{className:"welcome-description",children:d.welcomeDescription})]}),Object(G.jsxs)("div",{className:"levels-container",children:[Object(G.jsxs)("div",{className:"level header-row",children:[Object(G.jsx)("div",{className:"level-title",children:d.levelPrefix}),Object(G.jsx)("div",{className:"password-title",children:Object(G.jsx)(B.a,{className:"password-icon"})})]}),Object.entries(u).map((function(t,n){var c=Object(F.a)(t,2)[1],r=f(c),a=f("".concat(l).concat(n)),s=0===n||a,o=n+1,i="";return Object.entries(b).some((function(e){if(e[0]==="level_".concat(o))return i=e[1],!0})),Object(G.jsxs)("div",{className:"level ".concat(s&&r&&"level-success"),children:[Object(G.jsx)("div",{className:"level-info level-image",children:Object(G.jsxs)("button",{type:"button",className:"play-button ".concat(s?"":"disable"),onClick:s?function(){return function(t){e(S(t))}(o)}:void 0,children:[!s&&Object(G.jsx)(K.a,{className:"lock-icon"}),Object(G.jsx)("img",{src:"/pipes-puzzle"+"/Level_".concat(o,".PNG"),className:"play-button-image"})]})}),Object(G.jsx)("div",{className:"level-info level-label ".concat(s?"":"level-locked"),children:Object(G.jsx)("span",{className:"level-description",children:i})}),Object(G.jsx)("div",{className:"level-info level-password",children:s&&r||Object(G.jsx)(J.g,{className:"password-placeholder-icon"})})]},n)}))]})]})};var $=function(){return Object(G.jsxs)("div",{className:"puzzle puzzle-loading",children:[Object(G.jsx)(J.h,{className:"icon loading-icon"}),Object(G.jsx)("p",{className:"message loading-message",children:d.loading})]})};var ee=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.puzzleReducer.puzzleWebSocket}));return Object(G.jsxs)("div",{className:"puzzle puzzle-error",children:[Object(G.jsx)(J.a,{className:"icon error-icon"}),Object(G.jsx)("p",{className:"message error-message",children:d.connectionError}),Object(G.jsxs)("button",{type:"button",className:"action-return",onClick:function(){e(U(t))},children:[Object(G.jsx)(J.d,{className:"action-return-icon"}),Object(G.jsx)("span",{children:d.return})]})]})};var te,ne=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.puzzleReducer.puzzleWebSocket}));return Object(G.jsxs)("div",{className:"puzzle-game-over",children:[Object(G.jsx)(J.e,{className:"icon game-over-icon"}),Object(G.jsx)("p",{className:"message game-over-message",children:d.gameOverMessage}),Object(G.jsxs)("button",{type:"button",className:"action-return action-game-over",onClick:function(){e(U(t))},children:[Object(G.jsx)(J.d,{className:"action-return-icon"}),Object(G.jsx)("span",{children:d.return})]})]})};!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(te||(te={}));var ce=new Map([[te.CONNECTING,"(Socket has been created. The connection is not yet open.)"],[te.OPEN,"(The connection is open and ready to communicate.)"],[te.CLOSING,"(The connection is in the process of closing.)"],[te.CLOSED,"(The connection is closed or couldn't be opened.)"]]);var re=function(){var e,t=Object(s.b)(),n=Object(s.c)((function(e){return e.puzzleReducer.puzzleRemainingValidationAttempt})),c=Object(s.c)((function(e){return e.puzzleReducer.puzzleWebSocket})),r=Object(s.c)((function(e){return e.puzzleReducer.puzzleLevel}));return Object(G.jsxs)("div",{className:"puzzle-actions",children:[Object(G.jsxs)("span",{className:"puzzle-level",children:[d.levelPrefix," ",r]}),Object(G.jsxs)("div",{className:"action-buttons-wrapper",children:[Object(G.jsxs)("button",{type:"button",className:"action-button",onClick:function(){t(U(c))},children:[Object(G.jsx)(J.e,{className:"action-icon"}),Object(G.jsx)("span",{children:d.giveUp})]}),Object(G.jsxs)("button",{type:"button",className:"action-button action-validate",onClick:function(){c&&t(function(e,t){return function(){var n=Object(j.a)(Object(v.a)().mark((function n(c){var r;return Object(v.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(new m).verifyPuzzleAsync(e,t);case 3:if(r=n.sent){n.next=6;break}throw new Error;case 6:r.isCorrect||c(T()),r.isGameOver&&c(_()),r.isCorrect&&c(W(r.levelPassword)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),c(R());case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(c,r))},children:[Object(G.jsx)(J.c,{className:"action-icon"}),Object(G.jsx)("span",{children:d.check})]})]}),Object(G.jsxs)("div",{className:"info",children:[Object(G.jsxs)("p",{className:"info-message",children:[Object(G.jsx)("span",{children:d.remainingVerifyAttemptText}),Object(G.jsx)("span",{className:"count",children:n})]}),Object(G.jsx)("p",{className:"info-connection-state state_".concat((null===c||void 0===c?void 0:c.readyState)||""),children:(e=null===c||void 0===c?void 0:c.readyState,void 0!==e&&(ce.get(e)||ce.get(te.CLOSED))||"")})]})]})};var ae=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.puzzleReducer.puzzleWebSocket})),n=Object(s.c)((function(e){return e.puzzleReducer.puzzleLevelPassword})),c=Object(s.c)((function(e){return e.puzzleReducer.puzzleLevel}));return Object(G.jsxs)("div",{className:"puzzle-actions",children:[Object(G.jsxs)("div",{className:"winner",children:[Object(G.jsx)(J.f,{className:"icon winner-icon"}),Object(G.jsxs)("p",{className:"winner-message",children:[Object(G.jsx)("span",{children:d.achievemessage}),Object(G.jsx)("span",{className:"message-highlight",children:n})]})]}),Object(G.jsxs)("div",{className:"action-buttons-wrapper",children:[Object(G.jsxs)("button",{type:"button",className:"action-button",onClick:function(){e(U(t))},children:[Object(G.jsx)(J.d,{className:"action-icon"}),Object(G.jsx)("span",{children:d.return})]}),c<i.maxLevel&&Object(G.jsxs)("button",{type:"button",className:"action-button action-next",onClick:function(){t&&e(function(e,t){return function(){var n=Object(j.a)(Object(v.a)().mark((function n(c){var r;return Object(v.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(P()),n.prev=1,n.next=4,(new m).goToNextLevelAsync(e,t+1);case 4:if(!(r=n.sent)){n.next=9;break}c(M(r.puzzleData,r.puzzleDataDimension)),n.next=10;break;case 9:throw new Error;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),c(R());case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}()}(t,c))},children:[Object(G.jsx)(J.b,{className:"action-icon"}),Object(G.jsx)("span",{children:d.nextLevel})]}),c>=i.maxLevel&&Object(G.jsx)("p",{className:"level-finish",children:d.gameFinishedMessage})]})]})},se=n(32);var oe=function(e){var t=e.id.split("_"),n=Object(F.a)(t,2),c=n[0],r=n[1],a=Object(s.c)((function(e){return e.puzzleReducer.puzzleData[+c][+r]}));return Object(G.jsx)("button",{id:e.id,className:"puzzle-cell",children:a},+r)};var ie=function(e){for(var t=Object(s.c)((function(e){return e.puzzleReducer.puzzleDataDimension})),n=[],c=0;c<t[1];c++)n.push(Object(G.jsx)(oe,{id:"".concat(e.rowIndex,"_").concat(c)},"".concat(e.rowIndex,"_").concat(c)));return Object(G.jsx)("div",{className:"puzzle-row",style:e.style,children:n},e.rowIndex)};var le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.puzzleReducer.puzzleWebSocket})),n=Object(s.c)((function(e){return e.puzzleReducer.puzzleDataDimension})),r=Object(s.c)((function(e){return e.puzzleReducer.puzzleRemainingValidationAttempt})),a=Object(c.useState)(""),o=Object(F.a)(a,2),l=o[0],u=o[1];Object(c.useEffect)((function(){if(r!==i.remainingVerifyAttemptCount){u(" puzzle-bounce");var e=setTimeout((function(){u(""),clearTimeout(e)}),600)}}),[r]);var p=function(n){var c=n.target;if("puzzle-cell"===c.className){var r=c.id.split("_"),a=Object(F.a)(r,2),s=a[0],o=a[1];t&&e(function(e){var t=e.webSocket,n=e.cellX,c=e.cellY;return function(){var e=Object(j.a)(Object(v.a)().mark((function e(r){var a;return Object(v.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(new m).rotatePuzzleCellAsync({webSocket:t,cellX:n,cellY:c});case 3:if(!(a=e.sent)){e.next=8;break}r(V(a)),e.next=9;break;case 8:throw new Error;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(R());case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}({webSocket:t,cellX:+o,cellY:+s}))}},d=n[0]<18?n[0]:18;return Object(G.jsx)("div",{className:"puzzle-body".concat(l," attempt-").concat(r),onClick:function(e){return p(e)},children:Object(G.jsx)(se.a,{width:40*n[0],height:40*d,rowRenderer:function(e){return Object(G.jsx)(ie,{rowIndex:e.index,style:e.style},e.key)},rowCount:n[0],rowHeight:40})})};n(56);var ue=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.puzzleReducer.puzzleLevel})),n=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsStarted})),r=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsLoading})),a=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsError})),o=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsOver})),i=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsNextLevelAvailable}));return Object(c.useLayoutEffect)((function(){n||e(function(e){return function(){var t=Object(j.a)(Object(v.a)().mark((function t(n){var c;return Object(v.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(P()),t.prev=1,t.next=4,(new m).createNewPuzzle(e);case 4:if(!((c=t.sent)instanceof Object)){t.next=9;break}n(I(c.puzzleData,c.puzzleDataDimension,c.webSocket)),t.next=10;break;case 9:throw new Error;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(R());case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[e,n,t]),r?Object(G.jsx)($,{}):a?Object(G.jsx)(ee,{}):Object(G.jsxs)("div",{className:"puzzle ".concat(i?"puzzle-success":""," ").concat(o?"puzzle-failed":""),children:[o&&Object(G.jsx)(ne,{}),!o&&!i&&Object(G.jsx)(re,{}),i&&Object(G.jsx)(ae,{}),Object(G.jsx)(le,{})]})};var pe=function(){var e=Object(s.c)((function(e){return e.puzzleReducer.puzzleIsWelcome}));return Object(G.jsxs)(X,{children:[e&&Object(G.jsx)(Q,{}),!e&&Object(G.jsx)(ue,{})]})},de=function(){var e=Object(o.a)({reducer:H,devTools:!1,middleware:function(e){return e({serializableCheck:{ignoredActions:["PUZZLE_CREATED","PUZZLE_Updated"],ignoredPaths:["puzzleReducer.puzzleWebSocket"]}})}});return Object(G.jsx)(s.a,{store:e,children:Object(G.jsx)(r.a.StrictMode,{children:Object(G.jsx)(pe,{})})})},be=window.document.getElementById("PipesPuzzleGameApp");null!==be&&void 0!==be&&be.hasChildNodes()?Object(a.hydrate)(Object(G.jsx)(de,{}),be):Object(a.render)(Object(G.jsx)(de,{}),be)}},[[57,1,2]]]);
//# sourceMappingURL=main.e942fe40.chunk.js.map